<!doctype html>
<br lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">

    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.2/dist/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.js"></script>

    
    <title>ChartApp</title>
  </head>

  <body>

    <h1 class="text-center">Django Chart Project</h1>

    
<style>
  .parent {
    display: flex;
    width: 100%;
}
  .container{
    flex: 1;
    border: 2px solid blueviolet;
    margin: 10px;
  }
  .container:first-child{
    margin-right: 20px;
  }
  .chart5{
    height: 400px;
    width: flex;
  }
  .chart6{
    height: 600px;
  }
</style>
<div class='parent'>
  <div class="container">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <canvas id="myChart"></canvas>
    <h4> likelihood for various sectors</h4>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <canvas id="myChart1"></canvas>
    <h4> intensity vs endyear</h4>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <canvas id="myChart2"></canvas>
    <h4> intensity for various sectors</h4>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/chartjs-chart-geo@3.5.2/build/index.umd.min.js"></script>
    <script src="https://unpkg.com/chart.js-plugin-labels-dv/dist/chartjs-plugin-labels.min.js"></script>

    
    


   
    <script>
      x=[{% for i in qs %} '{{i.sector}}', {%endfor%}]
      y=[{% for i in qs %} '{{i.likelihood}}', {%endfor%}]
      const ctx = document.getElementById('myChart');
      x11=remove_duplicates_safe(x)
      new Chart(ctx, {
          type: 'bar',
          data: {
            labels: x11,
            datasets: [{
              label: 'Sectors',
              data: y,
              borderWidth: 1
            }]
          },
          options: {
            scales: {
            
            }
          }
        });
      

      
      const ctx1 = document.getElementById('myChart1');
      y1=[{% for i in qs %} '{{i.intensity}}', {%endfor%}]
      x1=[{% for i in qs %} '{{i.end_year}}', {%endfor%}]
      x11=remove_duplicates_safe(x1)
      x11.sort()
      new Chart(ctx1, {
          type: 'line',
          data: {
            labels: x11,
            datasets: [{
              label: 'endyear',
              data: y1,
              borderWidth: 1
            }]
          },
          options: {
            scales: {
            
            }
          }
        });

      function remove_duplicates_safe(arr) {
        var seen = {};
        var ret_arr = [];
        for (var i = 0; i < arr.length; i++) {
            if (!(arr[i] in seen)) {
                ret_arr.push(arr[i]);
                seen[arr[i]] = true;
            }
        }
        return ret_arr;

}
     
      const ctx2 = document.getElementById('myChart2');
      x2=[{% for i in qs %} '{{i.sector}}', {%endfor%}]
      y2=[{% for i in qs %} '{{i.intensity}}', {%endfor%}]
      x22=remove_duplicates_safe(x2)
      y22=remove_duplicates_safe(y2)
      
      new Chart(ctx2, {
          type: 'doughnut',
          data: {
            labels: x22,
            datasets: [{
              label: 'Sectors',
              data: y22,
              borderWidth: 1
            }],
          },
          options: {
            scales: {
            
            }
          }
        });
    </script>
  
  </div>
  <div class="container" >
    <div class="chart5">
    <canvas id="myChart5"></canvas>
    <h4>likelihood with intensity for countries</h4>
  </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <div class="chart6">
    <canvas id="myChart6"></canvas>
    <h4>likelihood with relevance for countries</h4>
  </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
    <canvas id="canvas"></canvas>
    <script>
       function remove_duplicates_safe1(arr) {
        var seen = {};
        var ret_arr = [];
        for (var i = 0; i < arr.length; i++) {
            if (!(arr[i] in seen)) {
                ret_arr.push(arr[i]);
                seen[arr[i]] = true;
            }
        }
        return ret_arr;

}
        y5=[{% for i in qs %} '{{i.intensity}}', {%endfor%}]
        x5=[{% for i in qs %} '{{i.country}}', {%endfor%}]
        z5=[{% for i in qs %} '{{i.likelihood}}', {%endfor%}]
        u5=[{% for i in qs %} '{{i.relevance}}', {%endfor%}]
        const ctx5 = document.getElementById("myChart5");
        x55=remove_duplicates_safe1(x5)
        new Chart(ctx5, {
            type: 'line',
            data: {
              labels: x55,
              datasets: [{
                label: 'relevance',
                data: u5,
                borderColor:'rgba(255, 0, 0, 0.5)',
                borderWidth: 1
              },{
                label: 'likelihood',
                data: z5,
                borderColor:'rgba(60, 179, 113, 0.5)',
                borderWidth: 1
              }]
            },
            options: {
              scales: {
              
              }
            }
          });
          
          

          const ctx6 = document.getElementById("myChart6");
          const myChart = new Chart(ctx6, {
              type: 'line',
              data: {
                  labels: x55,
                  datasets: [{
                      label: 'intensity', // Name the series
                      data: y5, // Specify the data values array
                      fill: 1,
                      borderColor: '#2196f3', // Add custom color border (Line)
                      backgroundColor: 'rgba(0,0,0,0.2)', // Add custom color background (Points and Fill)
                      borderWidth: 1 // Specify bar border width
                  },
                    {
                      label: 'likelihood', // Name the series
                      data: z5, // Specify the data values array
                      fill: 1,
                      borderColor: '#4CAF50', // Add custom color border (Line)
                      backgroundColor: 'rgba(2,0,0,0.2)', // Add custom color background (Points and Fill)
                      borderWidth: 1 // Specify bar border width
                  }]
              },
              options: {
                responsive: true, // Instruct chart js to respond nicely.
                maintainAspectRatio: false, // Add to prevent default behaviour of full-width/height 
              }
          });
          

          fetch('https://unpkg.com/world-atlas/countries-50m.json').then((r) => r.json()).then((data) => {
          const countries = ChartGeo.topojson.feature(data, data.objects.countries).features;

          const chart = new Chart(document.getElementById("canvas").getContext("2d"), {
            type: 'choropleth',
            data: {
              labels: countries.map(x5),
              datasets: [{
                label: 'Countries',
                data: countries.map(y5),
              }]
            },
            options: {
              showOutline: true,
              showGraticule: true,
              legend: {
                display: false
              },
              scale: {
                projection: 'equalEarth'
              },
              geo: {
                colorScale: {
                  display: true,
                },
              },
            }
          });
        });  
    </script>
  </div>
</div>
</body>

</html>